Q.1) Write a C Program that demonstrates redirection of standard output to a file [10 Marks ] 
#include <stdio.h> 
int main() { 
FILE *file = freopen("output.txt", "w", stdout); 
if (file == NULL) { 
perror("freopen"); 
return 1; 
} 
printf("This text will be written to output.txt\n"); 
fclose(file); 
return 0; 
} 
Q.2) Write a C program to implement the following unix/linux command (use fork, pipe and exec 
system call). Your program should block the signal Ctrl-C and Ctrl-\ signal during the execution. i. 
ls –l | wc –l [20 Marks ] 
#include <stdio.h> 
#include <stdlib.h> 
#include <unistd.h> 
#include <signal.h> 
#include <sys/wait.h> 
void block_signals() { 
sigset_t set; 
    sigemptyset(&set); 
    sigaddset(&set, SIGINT);  // Block Ctrl-C 
    sigaddset(&set, SIGQUIT); // Block Ctrl-\ 
    sigprocmask(SIG_BLOCK, &set, NULL); 
} 
 
int main() { 
    int pipe_fd[2]; 
    pid_t pid1, pid2; 
 
    pipe(pipe_fd); 
 
    pid1 = fork(); 
    if (pid1 == 0) { // First child: executes 'ls -l' 
        close(pipe_fd[0]); // Close read end 
        dup2(pipe_fd[1], STDOUT_FILENO); // Redirect stdout to the pipe 
        execlp("ls", "ls", "-l", NULL); 
        perror("execlp ls failed"); 
        exit(EXIT_FAILURE); 
    } 
 
    pid2 = fork(); 
    if (pid2 == 0) { // Second child: executes 'wc -l' 
        close(pipe_fd[1]); // Close write end 
        dup2(pipe_fd[0], STDIN_FILENO); // Redirect stdin from the pipe 
        execlp("wc", "wc", "-l", NULL); 
        perror("execlp wc failed"); 
        exit(EXIT_FAILURE); 
    } 
 
    // Parent process 
block_signals(); // Block Ctrl-C and Ctrl-\ signals 
close(pipe_fd[0]); 
close(pipe_fd[1]); 
wait(NULL); // Wait for both children to finish 
wait(NULL); 
return 0; 
}
