Q.1) Write a C program that redirects standard output to a file output.txt. (use of dup and open 
system call). [10 Marks ] 

#include <stdio.h> 
#include <fcntl.h> 
#include <unistd.h> 
int main() { 
int fd = open("output.txt", O_WRONLY | O_CREAT | O_TRUNC, 0644); 
int saved_stdout = dup(1); 
dup2(fd, 1); 
printf("This will be written to output.txt\n"); 
f
 flush(stdout); 
dup2(saved_stdout, 1); 
close(fd); 
return 0; 
} 
Q.2) Implement the following unix/linux command (use fork, pipe and exec system call) ls –l | wc –l. [20 Marks ] 

#include <stdio.h> 
#include <stdlib.h> 
#include <unistd.h> 
#include <sys/wait.h> 
int main() { 
int pipefd[2]; 
pipe(pipefd); 
pid_t pid1 = fork(); 
    if (pid1 == 0) { 
        close(pipefd[0]); 
        dup2(pipefd[1], STDOUT_FILENO); 
        execlp("ls", "ls", "-l", NULL); 
        exit(1); 
    } 
 
    pid_t pid2 = fork(); 
    if (pid2 == 0) { 
        close(pipefd[1]); 
        dup2(pipefd[0], STDIN_FILENO); 
        execlp("wc", "wc", "-l", NULL); 
        exit(1); 
    } 
 
    close(pipefd[0]); 
    close(pipefd[1]); 
    wait(NULL); 
    wait(NULL); 
 
    return 0; 
} 
