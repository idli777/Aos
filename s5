Q.1) Read the current directory and display the name of the files, no of files in current directory 
[10 Marks ] 

#include <stdio.h> 
#include <dirent.h> 
 
int main() { 
    DIR *dir; 
    struct dirent *entry; 
    int file_count = 0; 
 
    dir = opendir("."); 
    if (dir == NULL) { 
        perror("opendir"); 
        return 1; 
    } 
 
    printf("Files in the current directory:\n"); 
    while ((entry = readdir(dir)) != NULL) { 
        printf("%s\n", entry->d_name); 
        file_count++; 
    } 
 
    closedir(dir); 
    printf("Total number of files: %d\n", file_count); 
    return 0; 
} 
 
Q.2) Write a C program to create an unnamed pipe. The child process will write following three  
messages to pipe and parent process display it.   
Message1 = “Hello World”   
Message2 = “Hello SPPU”   
Message3 = “Linux is Funny”        

#include <stdio.h> 
#include <unistd.h> 
#include <string.h> 
 
int main() { 
    int fd[2]; 
    pid_t pid; 
    char buffer[100]; 
 
    pipe(fd); 
    pid = fork(); 
 
    if (pid == 0) { 
        close(fd[0]); 
        char *messages[] = {"Hello World", "Hello SPPU", "Linux is Funny"}; 
        for (int i = 0; i < 3; i++) { 
            write(fd[1], messages[i], strlen(messages[i]) + 1); 
            sleep(1); 
        } 
        close(fd[1]); 
    } else { 
        close(fd[1]); 
        while (read(fd[0], buffer, sizeof(buffer)) > 0) { 
            printf("Parent received: %s\n", buffer); 
        } 
        close(fd[0]); 
        wait(NULL); 
    } 
 
    return 0; 
} 
